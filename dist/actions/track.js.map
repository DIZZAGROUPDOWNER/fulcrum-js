{"version":3,"sources":["../../src/actions/track.js"],"names":["Track","file","attributes","formData","append","resourceName","access_key","options","body","headers","client","api","post","createAction","resp","id","get","trackPath","err","tracks","format","memberActionPath"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;;;IAEqBA,K;;;;;;;;;;;2GACDC,I,EAAMC,U;;;;;;AAChBC,wB,GAAW,wB;;;AAEjBA,yBAASC,MAAT,CAAmB,KAAKC,YAAxB,mBAAoDH,WAAWI,UAA/D;AACAH,yBAASC,MAAT,CAAmB,KAAKC,YAAxB,cAA+CJ,IAA/C;;AAEMM,uB,GAAU;AACdC,wBAAML,QADQ;AAEdM,2BAAS;AACP,oCAAgB;AADT;AAFK,iB;;uBAOG,KAAKC,MAAL,CAAYC,GAAZ,CAAgBC,IAAhB,CAAqB,KAAKC,YAA1B,EAAwCN,OAAxC,C;;;AAAbO,oB;iDACCA,KAAKN,IAAL,CAAU,KAAKH,YAAf,C;;;;;;;;;;;;;;;;;;;6GAGGU,E;;;;;;;uBACS,KAAKL,MAAL,CAAYC,GAAZ,CAAgBK,GAAhB,CAAoB,KAAKC,SAAL,CAAeF,EAAf,EAAmB,MAAnB,CAApB,C;;;AAAbD,oB;;qBAEFA,KAAKI,G;;;;;sBACDJ,KAAKI,G;;;kDAENJ,KAAKN,IAAL,CAAUW,M;;;;;;;;;;;;;;;;;;8BAGTJ,E,EAAIK,M,EAAQ;AACpB,aAAO,KAAKC,gBAAL,CAAsBN,EAAtB,EAA0B,OAA1B,EAAmCK,MAAnC,CAAP;AACD;;;;;kBA7BkBpB,K","file":"track.js","sourcesContent":["import FormData from 'form-data';\nimport Mixin from 'mixmatch';\n\nexport default class Track extends Mixin {\n  async uploadTrack(file, attributes) {\n    const formData = new FormData();\n\n    formData.append(`${this.resourceName}[access_key]`, attributes.access_key);\n    formData.append(`${this.resourceName}[track]`, file);\n\n    const options = {\n      body: formData,\n      headers: {\n        'Content-Type': null\n      }\n    };\n\n    const resp = await this.client.api.post(this.createAction, options);\n    return resp.body[this.resourceName];\n  }\n\n  async track(id) {\n    const resp = await this.client.api.get(this.trackPath(id, 'json'));\n\n    if (resp.err) {\n      throw resp.err;\n    }\n    return resp.body.tracks;\n  }\n\n  trackPath(id, format) {\n    return this.memberActionPath(id, 'track', format);\n  }\n}\n"]}